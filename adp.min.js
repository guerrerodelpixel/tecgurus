//AztecaDataPixel v0.0.1
(function(){const t='www.tvazteca.com',e=localStorage.getItem('user_im');function o(t){window.addEventListener('message',(o=>{if(o.origin==='https://'+t&&'string'==typeof o.data){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(o.data)){const n=window.atob(o.data);try{const a=JSON.parse(n);if('fingerprint'===a.id){let n=e,i=e?'anonymous':void 0;if('handshake'===a.method){const e=JSON.stringify({method:'handshake',id:'fingerprint',im:n,status:i}),a=window.btoa(e);o.source.postMessage(a,'https://'+t)}else if('globalIm'===a.method&&a.im!==n){let t={};t.im=a.im,t.token=a.token,localStorage.setItem('user_im',t.im),localStorage.setItem('user_token',t.token)}}}catch(t){console.warn('Error recibiendo Data Pixel:',t)}}}}))}'loading'!==document.readyState?o(t):document.addEventListener('DOMContentLoaded',(function(){o(t)}))})();